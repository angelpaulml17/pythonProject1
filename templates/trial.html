<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel=”stylesheet” href=”https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css”rel=”nofollow” integrity=”sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm” crossorigin=”anonymous”>
<!--    <script src="my.js"></script>-->
<!--    <link href='http://127.0.0.1:5000/Jquery/my.js'>-->
<style>
#canvas {
  align-content: center;
  height: 1000px;
}

#demo {
  margin: 0 -2px -2px 0;
  border: #FFF;
  border: 1px solid rgb(72, 170, 230);
  display: inline-block;
}

tr {
  background: #C0C0C0;
}

td {
  width: 50px;
  height: 50px;
}

    .add {
  height: 52px;
  width: 52px;
  background: #F4EAE6;
  cursor: pointer;
  color: #FFF;
  text-align: center;
  font-family: 'Open Sans', sans-serif;
  transition-property: background;
  transition-duration: 1s;
  transition-timing-function: linear;
}

#addColumn {
  display: inline-block;
  vertical-align: top;
  margin: 2px 0 0 0;
}

.add:hover {
  background: rgb(246, 192, 82);
}

#addColumnChild {
  line-height: 50px;
}

#addRow {
  vertical-align: bottom;
  margin: 0 0 0 2px;
}

#addRowChild {
  line-height: 50px;
}

.del {
  height: 52px;
  width: 52px;
  background: rgb(178, 0, 0);
  cursor: pointer;
  color: #FFF;
  text-align: center;
  font-family: 'Open Sans', sans-serif;
  transition-property: background;
  transition-duration: 1s;
  transition-timing-function: linear;
}

#delColumn {
  display: inline-block;
  vertical-align: top;
  margin: 2px 0 0 0;
}

.del:hover {
  background: rgb(202, 76, 73);
}

#delColumnChild {
  line-height: 50px;
}

#delRow {
  vertical-align: left;
  margin: 0 0 0 2px;
}

#delRowChild {
  line-height: 50px;
}
.open-button {
  background-color: #555;
  color: white;
  padding: 12px 15px;
  border: none;
  cursor: pointer;
  opacity: 0.8;
  position: fixed;
  bottom: 23px;
  right: 28px;
  width: 200px;
}

/* The popup form - hidden by default */
.form-popup {
  display: none;
  position: fixed;
  bottom: 15%;
  right: 40%;
  border: 3px solid #f1f1f1;
  z-index: 9;
}

/* Add styles to the form container */
.form-container {
  max-width: 350px;
  padding: 10px;
  background-color: white;
}

/* Full-width input fields */
.form-container input[type=text], .form-container input[type=password] {
  width: 90%;
  padding: 10px;
  margin: 5px 0 15px 0;
  border: none;
  background: #f1f1f1;
}

/* When the inputs get focus, do something */
.form-container input[type=text]:focus, .form-container input[type=password]:focus #check{
  background-color: #ddd;
  outline: none;
}

/* Set a style for the submit/login button */
.form-container .btn {
  background-color: #04AA6D;
  color: white;
  padding: 10px 15px;
  border: none;
  cursor: pointer;
  width: 25%;
  margin-bottom:5px;
  opacity: 0.8;
}

/* Add a red background color to the cancel button */
.form-container .cancel {
  background-color: red;
}

/* Add some hover effects to buttons */
.form-container .btn:hover, .open-button:hover {
  opacity: 1;
}
.multiselect {
  width: 200px;
}

.selectBox {
  position: relative;
}

.selectBox select {
  width: 100%;
  font-weight: bold;
}

.overSelect {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
}

#checkboxes {
  display: none;
  border: 1px #dadada solid;
}

#checkboxes label {
  display: block;
}

#checkboxes label:hover {
  background-color: #1e90ff;
}

</style>


</head>


<body>

<table id="demo">
  {% for row in range(1, len(records) + 1) %}
  <tr>
    {% for col in range(1, len(records[0]) + 1): %}
    <td>{{ records[row][col]}}</td>

    {% endfor %}
      <td><div id="addColumn" class="add">
  <div id="addColumnChild"><button onclick="addColumn(this)">+</button></div>
</div></td>
      <td>
          <button class="open-button" onclick="openForm()">Open Form</button>
          <div class="form-popup" id="myForm">
  <form class="form-container">
    <h1>Misclassification request</h1>

    <label for="L1"><b>New L1 classification</b></label>
    <input type="text" placeholder="Enter new L1" name="L1" id="L1"required>

      <label for="L2"><b>New L2 classification</b></label>
    <input type="text" placeholder="Enter new L2" name="L2" id="L2"required>

      <label for="L3"><b>New L3 classification</b></label>
    <input type="text" placeholder="Enter new L3" name="L3"  id="L3"required>
    <div class="multiselect">
    <div class="selectBox" onclick="showCheckboxes()">
        <label for="check"><b>Fields to create rule</b></label>
      <select id="check">
        <option>Select the fields</option>
      </select>
      <div class="overSelect"></div>
    </div>
    <div id="checkboxes">
      <label for="one">
        <input type="checkbox" id="supplier_name" id="one"/>Supplier Name</label>
      <label for="two">
        <input type="checkbox" id="supplier_number" id="two"/>Supplier Number</label>
      <label for="three">
        <input type="checkbox" id="po_number" id="three"/>PO Number</label>
    </div>
  </div>
    <button type="submit" class="btn">Submit</button>
    <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
  </form>
</div></td>
  </tr>
  {% endfor %}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
</table>
<script>
<!--for pop up-->
function openForm() {
  document.getElementById("myForm").style.display = "block";
}

function closeForm() {
  document.getElementById("myForm").style.display = "none";
}
<!--for checkbox select-->
var expanded = false;

function showCheckboxes() {
  var checkboxes = document.getElementById("checkboxes");
  if (!expanded) {
    checkboxes.style.display = "block";
    expanded = true;
  } else {
    checkboxes.style.display = "none";
    expanded = false;
  }
}


function addColumn (element) {
console.log(element.closest('tr').rowIndex);
for (const [i, row] of [...document.querySelectorAll('#demo tr')].entries()) {
<!--    const input = document.createElement("input")-->
<!--    input.setAttribute('type', 'text')-->
<!--    const cell = document.createElement(i ? "td" : "th")-->
<!--    cell.appendChild(input)-->
<!--    row.appendChild(cell)-->
const row1=element.closest('tr').rowIndex
if(row1==i){
var subjectObject = {
  "GREF": {
    "Capital Expenditure": ["Construction", "Engineering/Design", "Office Furniture"],
    "Electronic Disposition": ["ARS - Asset Recovery and Disposal", "WEEE"]
  },
  "CFS": {
    "PHP": ["Variables", "Strings", "Arrays"],
    "SQL": ["SELECT", "UPDATE", "DELETE"]
  }
}
       var cell3 = row.insertCell(-1);
       var element2 = document.createElement("select");
       element2.placeholder="New L1 classification"
       element2.style.width='200px';
       var element1 = document.createElement("select");
       element1.placeholder="New L2 classification"
       element1.style.width='200px';
       var element3 = document.createElement("select");
       element3.placeholder="New L3 classification"
       element3.style.width='200px';

<!--       var l1=document.getElementById("L1")-->
<!--       var l2=document.getElementById("L2")-->
<!--       var l3=document.getElementById("L3")-->


       for (var x in subjectObject) {
    element2.options[element2.options.length] = new Option(x, x);
  }
  element2.onchange = function() {
//empty Chapters- and Topics- dropdowns
 element1.length = 1;
 element3.length = 1;
    //display correct values
    for (var y in subjectObject[this.value]) {
      element1.options[element1.options.length] = new Option(y, y);
    }
  }
  element1.onchange = function() {
//empty Chapters dropdown
 element3.length = 1;
    //display correct values
    var z = subjectObject[element2.value][this.value];
    for (var i = 0; i < z.length; i++) {
      element3.options[element3.options.length] = new Option(z[i], z[i]);
    }
  }


<!--            for (var x in subjectObject) {-->
<!--    l1.options[l1.options.length] = new Option(x, x);-->
<!--  }-->
<!--  l1.onchange = function() {-->
<!--//empty Chapters- and Topics- dropdowns-->
<!-- l2.length = 1;-->
<!-- l3.length = 1;-->
<!--    //display correct values-->
<!--    for (var y in subjectObject[this.value]) {-->
<!--      l2.options[l2.options.length] = new Option(y, y);-->
<!--    }-->
<!--  }-->
<!--  l2.onchange = function() {-->
<!--//empty Chapters dropdown-->
<!-- l3.length = 1;-->
<!--    //display correct values-->
<!--    var z = subjectObject[l1.value][this.value];-->
<!--    for (var i = 0; i < z.length; i++) {-->
<!--      l3.options[l3.options.length] = new Option(z[i], z[i]);-->
<!--    }-->
<!--  }-->





       var select = document.createElement("div");
       var values = ["Supplier Number", "major account id", "Supplier name", "Fiscal Year"]

    for (const val of values)
    {
var option = document.createElement("option");
<!--        option.value = val;-->
<!--        option.type="checkbox";-->
<!--        option.text = val.charAt(0).toUpperCase() + val.slice(1);-->
<!--    var element0 = document.createElement("input");-->
<!--            element0.type = "checkbox";-->
<!--            element0.value = val;-->
<!--            option.appendChild(element0);-->

<!--        select.appendChild(option);-->

        var checkbox = document.createElement('input');
    checkbox.type = 'checkbox';
    checkbox.id = 'supplier_name';
    checkbox.name = 'interest';
    checkbox.value = val;

    var label = document.createElement('label')
    label.htmlFor = 'supplier_name';
    label.appendChild(document.createTextNode(val));
    select.appendChild(checkbox);
    select.appendChild(label);
    var br = document.createElement('br')
    select.appendChild(br);

    }

       element2.type = "text";
       element1.type = "text";
       element3.type = "text";
       row.appendChild(element2);
       row.appendChild(element1);
       row.appendChild(element3);
       row.appendChild(select);
 var element4 = document.createElement("input");
        element4.type = "submit";
        row.appendChild(element4);
console.log(i);
element4.onclick = function(){
var checkboxes =
                document.getElementsByName('interest');

            var result = "";
var element5 = document.createElement("div");
            for (var i = 0; i < checkboxes.length; i++) {
                if (checkboxes[i].checked) {
                    result += checkboxes[i].value
                        + " " + " Laptop, ";
 var cell3 = row.insertCell(-1);
       var element4 = document.createElement("input");
       element4.type="text";
       element4.placeholder=checkboxes[i].value;
       element4.style.width='200px';
        element5.appendChild(element4);

                }
            }
<!--            document.write("<p> You have selected : "-->
<!--                    + result + "</p>");-->
row.appendChild(element5)




};

};
<!--document.getElementById(submitbutton).onClick=getValue;-->
 }

}

</script>


</body>
</html>